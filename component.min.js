!function(n){"use strict";Date.now||(Date.now=function(){return+new Date});var t=n("body");n.fn.cmModal=function(e){var a,i=[],o={title:!1,content:!1,position:"center",id:!1,class:!1,coupon:!1,animation:!0,animationIn:"fadeInUp",animationOut:"fadeOutDown",animationDuration:600,closeBtn:!0,closeOnClick:!0,multiple:!0,overlay:!0};if((a=n.extend({},o,e)).id)c=a.id;else var c="modal-"+(Date.now().toString()+Math.floor(1e5*Math.random()));a.content&&0===a.content.indexOf("#")&&n(a.content).length>0&&(a.content=n(a.content).html()),a.class&&i.push(a.class);var r={alignModal:function(){var t,e=n(window).height(),i=r.instance.parents(".cm-modal-wrapper"),o=r.instance.height(),c=(e-o)/2;if(o>5&&i.css({position:"fixed",top:0,left:0}),o>e)i.css({"text-align":"center","overflow-y":"scroll"}),r.instance.css({"margin-top":"50px","margin-bottom":"50px"});else switch(a.position){case"left":i.css({"text-align":"left"});break;case"right":i.css({"text-align":"right"});break;case"center":i.css({"text-align":"center"}),r.instance.css({"margin-top":c+"px","margin-bottom":0})}return n(window).resize(function(){window.clearTimeout(t),t=window.setTimeout(function(){r.alignModal()},200)}),r},closeModal:function(n){return 0!=n&&(n=!0),a.animation&&r.animateModal("hide"),r.instance&&window.setTimeout(function(){r.instance.parents(".cm-modal-wrapper").remove()},a.animationDuration),r},animateModal:function(n){return r.instance.addClass("cm-animation"),"hide"==n?r.instance.removeClass(a.animationIn).addClass(a.animationOut):r.instance.addClass(a.animationIn).removeClass(a.animationOut),r},init:function(){return a.content||(a.content=""),l(a.content)}},l=function(e){var o="";o+='<div class="cm-modal-wrapper">',o+='<div id="'+c+'" class="cm-modal '+i.join(" ")+'">',a.title&&(o+='<div class="cm-modal-title">'+a.title+"</div>"),o+='<div class="cm-modal-content">',a.coupon&&(o+='<div class="cm-modal-coupon">',o+='<img src="'+a.coupon+'">',o+="</div>"),o+=e,o+="</div>",o+="</div>",a.closeBtn&&(o+="<div class='cm-modal-remove'></div>");var l=n(o+="</div>");return t.append(l),r.instance=n("#"+c),a.position&&r.alignModal(),a.overlay&&r.instance.parents(".cm-modal-wrapper").addClass("cm-modal-overlay"),a.animation&&r.animateModal("show"),a.closeBtn&&r.instance.parents(".cm-modal-wrapper").on("click",".cm-modal-remove",function(n){return n.preventDefault(),r.closeModal("remove"),!1}),a.closeOnClick&&r.instance.parents(".cm-modal-wrapper").on("click",function(t){var e=t.target?t.target:t.srcElement;n(e).is(".cm-modal *")||r.closeModal("remove")}),r.instance};return r.init(),r},n.fn.cmAccordion=function(t){var e,a=this,i={title:!1,content:!1,control:".cm-accordion-title",wrapper:".cm-accordion-wrapper",id:!1,class:!1,transitionSpeed:300,multiple:!1};e=n.extend({},i,t);var o=n(a),c=o.find("> "+e.control),r=o.find("> "+e.wrapper),l=o.parents().filter(".cm-accordion-wrapper");e.content&&0===e.content.indexOf("#")&&n(e.content).length>0&&(e.content=n(e.content).html());var s={collapse:function(t){return"single"==t?r.removeClass("cm-accordion-expand").slideUp(e.transitionSpeed):n("[data-accordion] .cm-accordion-wrapper").not(l).removeClass("cm-accordion-expand").slideUp(),s},expand:function(){return r.addClass("cm-accordion-expand").slideDown(),s},toggle:function(){return r.hasClass("cm-accordion-expand")?s.collapse("single"):e.multiple?s.expand():s.collapse("multi").expand(),s},control:function(){return c.on("click",function(){s.toggle()}),s},init:function(){e.title?c.html(e.title):c.html(),e.content?r.html(e.content):r.html(),s.control()}};return s.init(),s},n.fn.cmTab=function(t){var e,a=this,i={title:!1,content:!1,control:".cm-tab-title",panel:".cm-tab-panel",wrapper:".cm-tab-content",contentPanel:".cm-tab-content-panel",id:!1,active:"cm-active",animation:!0,transitionSpeed:300,parallel:"horizontal",rowItems:!1,alignItems:"center"};e=n.extend({},i,t);var o=n(a),c=o.find(e.panel+" > "+e.control),r=o.find("> "+e.panel),l=o.find(e.contentPanel+" > "+e.wrapper);o.find("> "+e.contentPanel);e.parallel,o.addClass("cm-"+e.parallel);var s={itemSize:function(){r.height();var n=c.length;switch(e.alignItems){case"center":c.addClass("cm-valign-middle")}if(e.rowItems)t=100/e.rowItems;else var t=100/n;return"horizontal"==e.parallel?c.css({width:t+"%"}):c.css({width:"100%"}),s},animate:function(n){return l.addClass("cm-animation"),"hide"==n?(l.addClass("slideLeftOut"),l.removeClass("slideLeftIn")):(l.addClass("slideLeftIn"),l.removeClass("slideLeftOut")),s},remove:function(){return c.removeClass(e.active),l.removeClass(e.active),s},active:function(){return c.on("click",function(){var t=n(this),a=t.attr("data-target"),i=n(a);s.remove(),t.addClass(e.active),i.addClass(e.active),e.animation&&s.animate("show")}),s},init:function(){return l.first().addClass(e.active),s.itemSize().active(),s}};return s.init(),s},n.fn.cmAnchor=function(t){var e,a={control:"[data-anchor]",position:0,speed:400};e=n.extend({},a,t);var i=n(e.control),o={init:function(){i.on("click",function(t){t.preventDefault();var a=n(this).attr("data-target");n("html, body").animate({scrollTop:n("#"+a).offset().top-e.position},e.speed)})}};return o.init(),o}}(jQuery);
